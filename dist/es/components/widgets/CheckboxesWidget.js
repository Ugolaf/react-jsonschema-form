import React from "react";
import PropTypes from "prop-types";

function selectValue(value, selected, all) {
  var at = all.indexOf(value);
  var updated = selected.slice(0, at).concat(value, selected.slice(at)); // As inserting values at predefined index positions doesn't work with empty
  // arrays, we need to reorder the updated selection to match the initial order

  return updated.sort(function (a, b) {
    return all.indexOf(a) > all.indexOf(b);
  });
}

function deselectValue(value, selected) {
  return selected.filter(function (v) {
    return v !== value;
  });
}

function CheckboxesWidget(props) {
  var id = props.id,
      disabled = props.disabled,
      options = props.options,
      value = props.value,
      autofocus = props.autofocus,
      readonly = props.readonly,
      _onChange = props.onChange;
  var enumOptions = options.enumOptions,
      enumDisabled = options.enumDisabled,
      inline = options.inline;
  return /*#__PURE__*/React.createElement("div", {
    className: "checkboxes",
    id: id
  }, enumOptions.map(function (option, index) {
    var checked = value.indexOf(option.value) !== -1;
    var itemDisabled = enumDisabled && enumDisabled.indexOf(option.value) != -1;
    var disabledCls = disabled || itemDisabled || readonly ? "disabled" : "";
    var checkbox = /*#__PURE__*/React.createElement("span", null, /*#__PURE__*/React.createElement("input", {
      type: "checkbox",
      id: "".concat(id, "_").concat(index),
      checked: checked,
      disabled: disabled || itemDisabled || readonly,
      autoFocus: autofocus && index === 0,
      onChange: function onChange(event) {
        var all = enumOptions.map(function (_ref) {
          var value = _ref.value;
          return value;
        });

        if (event.target.checked) {
          _onChange(selectValue(option.value, value, all));
        } else {
          _onChange(deselectValue(option.value, value));
        }
      }
    }), /*#__PURE__*/React.createElement("span", null, option.label));
    return inline ? /*#__PURE__*/React.createElement("label", {
      key: index,
      className: "checkbox-inline ".concat(disabledCls)
    }, checkbox) : /*#__PURE__*/React.createElement("div", {
      key: index,
      className: "checkbox ".concat(disabledCls)
    }, /*#__PURE__*/React.createElement("label", null, checkbox));
  }));
}

CheckboxesWidget.defaultProps = {
  autofocus: false,
  options: {
    inline: false
  }
};

if (process.env.NODE_ENV !== "production") {
  CheckboxesWidget.propTypes = {
    schema: PropTypes.object.isRequired,
    id: PropTypes.string.isRequired,
    options: PropTypes.shape({
      enumOptions: PropTypes.array,
      inline: PropTypes.bool
    }).isRequired,
    value: PropTypes.any,
    required: PropTypes.bool,
    readonly: PropTypes.bool,
    disabled: PropTypes.bool,
    multiple: PropTypes.bool,
    autofocus: PropTypes.bool,
    onChange: PropTypes.func
  };
}

export default CheckboxesWidget;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3dpZGdldHMvQ2hlY2tib3hlc1dpZGdldC5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsIlByb3BUeXBlcyIsInNlbGVjdFZhbHVlIiwidmFsdWUiLCJzZWxlY3RlZCIsImFsbCIsImF0IiwiaW5kZXhPZiIsInVwZGF0ZWQiLCJzbGljZSIsImNvbmNhdCIsInNvcnQiLCJhIiwiYiIsImRlc2VsZWN0VmFsdWUiLCJmaWx0ZXIiLCJ2IiwiQ2hlY2tib3hlc1dpZGdldCIsInByb3BzIiwiaWQiLCJkaXNhYmxlZCIsIm9wdGlvbnMiLCJhdXRvZm9jdXMiLCJyZWFkb25seSIsIm9uQ2hhbmdlIiwiZW51bU9wdGlvbnMiLCJlbnVtRGlzYWJsZWQiLCJpbmxpbmUiLCJtYXAiLCJvcHRpb24iLCJpbmRleCIsImNoZWNrZWQiLCJpdGVtRGlzYWJsZWQiLCJkaXNhYmxlZENscyIsImNoZWNrYm94IiwiZXZlbnQiLCJ0YXJnZXQiLCJsYWJlbCIsImRlZmF1bHRQcm9wcyIsInByb2Nlc3MiLCJlbnYiLCJOT0RFX0VOViIsInByb3BUeXBlcyIsInNjaGVtYSIsIm9iamVjdCIsImlzUmVxdWlyZWQiLCJzdHJpbmciLCJzaGFwZSIsImFycmF5IiwiYm9vbCIsImFueSIsInJlcXVpcmVkIiwibXVsdGlwbGUiLCJmdW5jIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPQSxLQUFQLE1BQWtCLE9BQWxCO0FBQ0EsT0FBT0MsU0FBUCxNQUFzQixZQUF0Qjs7QUFFQSxTQUFTQyxXQUFULENBQXFCQyxLQUFyQixFQUE0QkMsUUFBNUIsRUFBc0NDLEdBQXRDLEVBQTJDO0FBQ3pDLE1BQU1DLEVBQUUsR0FBR0QsR0FBRyxDQUFDRSxPQUFKLENBQVlKLEtBQVosQ0FBWDtBQUNBLE1BQU1LLE9BQU8sR0FBR0osUUFBUSxDQUFDSyxLQUFULENBQWUsQ0FBZixFQUFrQkgsRUFBbEIsRUFBc0JJLE1BQXRCLENBQTZCUCxLQUE3QixFQUFvQ0MsUUFBUSxDQUFD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Z0QsSUFWTztBQVczQkcsSUFBQUEsUUFBUSxFQUFFbkQsU0FBUyxDQUFDZ0QsSUFYTztBQVkzQjNCLElBQUFBLFNBQVMsRUFBRXJCLFNBQVMsQ0FBQ2dELElBWk07QUFhM0J6QixJQUFBQSxRQUFRLEVBQUV2QixTQUFTLENBQUNvRDtBQWJPLEdBQTdCO0FBZUQ7O0FBRUQsZUFBZXBDLGdCQUFmIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gXCJwcm9wLXR5cGVzXCI7XHJcblxyXG5mdW5jdGlvbiBzZWxlY3RWYWx1ZSh2YWx1ZSwgc2VsZWN0ZWQsIGFsbCkge1xyXG4gIGNvbnN0IGF0ID0gYWxsLmluZGV4T2YodmFsdWUpO1xyXG4gIGNvbnN0IHVwZGF0ZWQgPSBzZWxlY3RlZC5zbGljZSgwLCBhdCkuY29uY2F0KHZhbHVlLCBzZWxlY3RlZC5zbGljZShhdCkpO1xyXG4gIC8vIEFzIGluc2VydGluZyB2YWx1ZXMgYXQgcHJlZGVmaW5lZCBpbmRleCBwb3NpdGlvbnMgZG9lc24ndCB3b3JrIHdpdGggZW1wdHlcclxuICAvLyBhcnJheXMsIHdlIG5lZWQgdG8gcmVvcmRlciB0aGUgdXBkYXRlZCBzZWxlY3Rpb24gdG8gbWF0Y2ggdGhlIGluaXRpYWwgb3JkZXJcclxuICByZXR1cm4gdXBkYXRlZC5zb3J0KChhLCBiKSA9PiBhbGwuaW5kZXhPZihhKSA+IGFsbC5pbmRleE9mKGIpKTtcclxufVxyXG5cclxuZnVuY3Rpb24gZGVzZWxlY3RWYWx1ZSh2YWx1ZSwgc2VsZWN0ZWQpIHtcclxuICByZXR1cm4gc2VsZWN0ZWQuZmlsdGVyKHYgPT4gdiAhPT0gdmFsdWUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBDaGVja2JveGVzV2lkZ2V0KHByb3BzKSB7XHJcbiAgY29uc3QgeyBpZCwgZGlzYWJsZWQsIG9wdGlvbnMsIHZhbHVlLCBhdXRvZm9jdXMsIHJlYWRvbmx5LCBvbkNoYW5nZSB9ID0gcHJvcHM7XHJcbiAgY29uc3QgeyBlbnVtT3B0aW9ucywgZW51bURpc2FibGVkLCBpbmxpbmUgfSA9IG9wdGlvbnM7XHJcbiAgcmV0dXJuIChcclxuICAgIDxkaXYgY2xhc3NOYW1lPVwiY2hlY2tib3hlc1wiIGlkPXtpZH0+XHJcbiAgICAgIHtlbnVtT3B0aW9ucy5tYXAoKG9wdGlvbiwgaW5kZXgpID0+IHtcclxuICAgICAgICBjb25zdCBjaGVja2VkID0gdmFsdWUuaW5kZXhPZihvcHRpb24udmFsdWUpICE9PSAtMTtcclxuICAgICAgICBjb25zdCBpdGVtRGlzYWJsZWQgPVxyXG4gICAgICAgICAgZW51bURpc2FibGVkICYmIGVudW1EaXNhYmxlZC5pbmRleE9mKG9wdGlvbi52YWx1ZSkgIT0gLTE7XHJcbiAgICAgICAgY29uc3QgZGlzYWJsZWRDbHMgPVxyXG4gICAgICAgICAgZGlzYWJsZWQgfHwgaXRlbURpc2FibGVkIHx8IHJlYWRvbmx5ID8gXCJkaXNhYmxlZFwiIDogXCJcIjtcclxuICAgICAgICBjb25zdCBjaGVja2JveCA9IChcclxuICAgICAgICAgIDxzcGFuPlxyXG4gICAgICAgICAgICA8aW5wdXRcclxuICAgICAgICAgICAgICB0eXBlPVwiY2hlY2tib3hcIlxyXG4gICAgICAgICAgICAgIGlkPXtgJHtpZH1fJHtpbmRleH1gfVxyXG4gICAgICAgICAgICAgIGNoZWNrZWQ9e2NoZWNrZWR9XHJcbiAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkIHx8IGl0ZW1EaXNhYmxlZCB8fCByZWFkb25seX1cclxuICAgICAgICAgICAgICBhdXRvRm9jdXM9e2F1dG9mb2N1cyAmJiBpbmRleCA9PT0gMH1cclxuICAgICAgICAgICAgICBvbkNoYW5nZT17ZXZlbnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsID0gZW51bU9wdGlvbnMubWFwKCh7IHZhbHVlIH0pID0+IHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChldmVudC50YXJnZXQuY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZShzZWxlY3RWYWx1ZShvcHRpb24udmFsdWUsIHZhbHVlLCBhbGwpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlKGRlc2VsZWN0VmFsdWUob3B0aW9uLnZhbHVlLCB2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgIDxzcGFuPntvcHRpb24ubGFiZWx9PC9zcGFuPlxyXG4gICAgICAgICAgPC9zcGFuPlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgcmV0dXJuIGlubGluZSA/IChcclxuICAgICAgICAgIDxsYWJlbCBrZXk9e2luZGV4fSBjbGFzc05hbWU9e2BjaGVja2JveC1pbmxpbmUgJHtkaXNhYmxlZENsc31gfT5cclxuICAgICAgICAgICAge2NoZWNrYm94fVxyXG4gICAgICAgICAgPC9sYWJlbD5cclxuICAgICAgICApIDogKFxyXG4gICAgICAgICAgPGRpdiBrZXk9e2luZGV4fSBjbGFzc05hbWU9e2BjaGVja2JveCAke2Rpc2FibGVkQ2xzfWB9PlxyXG4gICAgICAgICAgICA8bGFiZWw+e2NoZWNrYm94fTwvbGFiZWw+XHJcbiAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApO1xyXG4gICAgICB9KX1cclxuICAgIDwvZGl2PlxyXG4gICk7XHJcbn1cclxuXHJcbkNoZWNrYm94ZXNXaWRnZXQuZGVmYXVsdFByb3BzID0ge1xyXG4gIGF1dG9mb2N1czogZmFsc2UsXHJcbiAgb3B0aW9uczoge1xyXG4gICAgaW5saW5lOiBmYWxzZSxcclxuICB9LFxyXG59O1xyXG5cclxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xyXG4gIENoZWNrYm94ZXNXaWRnZXQucHJvcFR5cGVzID0ge1xyXG4gICAgc2NoZW1hOiBQcm9wVHlwZXMub2JqZWN0LmlzUmVxdWlyZWQsXHJcbiAgICBpZDogUHJvcFR5cGVzLnN0cmluZy5pc1JlcXVpcmVkLFxyXG4gICAgb3B0aW9uczogUHJvcFR5cGVzLnNoYXBlKHtcclxuICAgICAgZW51bU9wdGlvbnM6IFByb3BUeXBlcy5hcnJheSxcclxuICAgICAgaW5saW5lOiBQcm9wVHlwZXMuYm9vbCxcclxuICAgIH0pLmlzUmVxdWlyZWQsXHJcbiAgICB2YWx1ZTogUHJvcFR5cGVzLmFueSxcclxuICAgIHJlcXVpcmVkOiBQcm9wVHlwZXMuYm9vbCxcclxuICAgIHJlYWRvbmx5OiBQcm9wVHlwZXMuYm9vbCxcclxuICAgIGRpc2FibGVkOiBQcm9wVHlwZXMuYm9vbCxcclxuICAgIG11bHRpcGxlOiBQcm9wVHlwZXMuYm9vbCxcclxuICAgIGF1dG9mb2N1czogUHJvcFR5cGVzLmJvb2wsXHJcbiAgICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmMsXHJcbiAgfTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2hlY2tib3hlc1dpZGdldDtcclxuIl19